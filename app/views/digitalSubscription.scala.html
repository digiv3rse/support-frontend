@import assets.AssetsResolver
@import com.gu.identity.play.IdUser

@import admin.Settings
@(
  title: String,
  id: String,
  js: String,
  css: String,
  csrf: Option[String],
  user: Option[IdUser]
)(implicit assets: AssetsResolver, requestHeader: RequestHeader, settings: Settings)

@userDataScript = {
  <script type="text/javascript">
    window.guardian = window.guardian || {};

  @user.map { x =>
    window.guardian.user = {
      @for(fields <- x.privateFields; firstName <- fields.firstName; lastName <- fields.secondName) {
                  firstName: "@firstName",
                  lastName: "@lastName",
                  email: "@x.primaryEmailAddress"
              }
    };
  }

  </script>
}


@main(title = title, scripts = userDataScript, mainJsBundle = js, mainId = id, mainStyleBundle = css, csrf = csrf)
