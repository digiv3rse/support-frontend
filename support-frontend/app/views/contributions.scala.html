@import admin.settings.AllSettings
@import assets.{AssetsResolver, RefPath, StyleContent}
@import com.gu.i18n.Currency.AUD
@import com.gu.identity.play.IdUser
@import com.gu.support.config.{PayPalConfig, StripeConfig}
@import helper.CSRF
@import views.{Preload, SSRContent}
@(
  title: String,
  id: String,
  js: Either[RefPath, StyleContent],
  css: Either[RefPath, StyleContent],
  description: Option[String],
  oneOffDefaultStripeConfig: StripeConfig,
  oneOffUatStripeConfig: StripeConfig,
  regularDefaultStripeConfig: StripeConfig,
  regularUatStripeConfig: StripeConfig,
  regularDefaultPayPalConfig: PayPalConfig,
  regularUatPayPalConfig: PayPalConfig,
  paymentApiStripeEndpoint: String,
  paymentApiPayPalEndpoint: String,
  existingPaymentOptionsEndpoint: String,
  idUser: Option[IdUser],
  campaignCodeModifier: Option[String],
  fontLoaderBundle: Either[RefPath, StyleContent]
)(implicit assets: AssetsResolver, request: RequestHeader, settings: AllSettings)

@defining {

  <div aria-hidden="true">
    <div class="gu-content gu-content--contribution-form gu-content--contribution-form--placeholder @campaignCodeModifier.map(campaign => s"gu-content--campaign-landing $campaign")">
      <header role="banner" class="gu-content__header"><a class="glogo" href="https://www.theguardian.com"><svg class="svg-roundel" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 69 69" preserveAspectRatio="xMinYMid" aria-labelledby="svg-roundel-title"><title id="svg-roundel-title">
        The Guardian</title><path class="svg-roundel__bg" d="M34.5 0C15.446 0 0 15.446 0 34.5 0 53.554 15.446 69 34.5 69 53.554 69 69 53.554 69 34.5A34.5 34.5 0 0 0 34.5 0" fill="#fff"></path><path class="svg-roundel__g" d="M40.25 8.552c4.46.711 10.123 3.752 12.15 5.923v9.81h-1.228L40.25 9.655V8.552zm-4.103.613h-.11c-7.802 0-12.04 10.791-12.04 25.335 0 14.556 4.238 25.335 12.04 25.335h.11v1.116c-11.745.797-27.544-8.13-27.139-26.463C8.59 16.179 24.39 7.252 36.147 8.049v1.116zM56 36.793l-3.686 1.594V54.87a29.827 29.827 0 0 1-12.064 5.923V38.08l-4.054-1.337v-1.116H56v1.165z" fill="#121212"></path></svg></a><details class="countryGroups"><summary aria-label="Selected country: United Kingdom (£)"><div class="countryGroups__summary-wrapper"><svg class="svg-globe" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" preserveAspectRatio="xMinYMid"><path d="M23.7,22.4 L45.8,22.4 L45.8,0.5 C40.7,0.7 35.6,1.8 30.8,3.7 C29.3,6 28,8.5 27,11.2 C25.6,14.8 24.5,18.6 23.7,22.4"></path><path d="M22,9.2 C22.2,8.7 22.4,8.2 22.6,7.7 C16.6,11.4 11.6,16.4 7.8,22.4 L18.2,22.4 C19.1,17.9 20.4,13.5 22,9.2"></path><path d="M15.8,50.7 L0.5,50.7 C0.8,56.8 2.3,62.7 4.9,68.2 L17.2,68.2 C16.3,62.4 15.9,56.5 15.8,50.7"></path><path d="M17.2,27.8 L4.9,27.8 C2.3,33.3 0.8,39.2 0.5,45.3 L15.8,45.3 C15.9,39.4 16.4,33.6 17.2,27.8"></path><path d="M78.8,22.4 L88.2,22.4 C84.7,16.9 80.1,12.2 74.7,8.5 C74.8,8.7 74.9,9 75,9.2 C76.6,13.5 77.9,17.9 78.8,22.4"></path><path d="M81.2,45.3 L95.5,45.3 C95.2,39.2 93.7,33.3 91.1,27.8 L79.7,27.8 C80.6,33.6 81.1,39.4 81.2,45.3"></path><path d="M73.3,22.4 C72.5,18.6 71.4,14.8 70,11.2 C69.1,8.7 67.9,6.4 66.5,4.1 C61.6,2.1 56.4,0.9 51.2,0.6 L51.2,22.5 L73.3,22.5 L73.3,22.4 Z"></path><path d="M51.2,68.2 L74.3,68.2 C75.2,62.4 75.7,56.6 75.8,50.7 L51.2,50.7 L51.2,68.2 Z"></path><path d="M79.7,68.2 L91.1,68.2 C93.7,62.7 95.2,56.8 95.5,50.7 L81.2,50.7 C81.1,56.5 80.6,62.4 79.7,68.2"></path><path d="M73.3,73.5 L51.2,73.5 L51.2,95.4 C56.5,95.1 61.6,93.9 66.5,91.9 C67.9,89.7 69.1,87.3 70,84.8 C71.4,81.1 72.5,77.4 73.3,73.5"></path><path d="M23.7,73.5 C24.5,77.3 25.6,81.1 27,84.8 C28,87.5 29.3,90 30.8,92.4 C35.6,94.3 40.7,95.3 45.8,95.6 L45.8,73.6 L23.7,73.5 Z"></path><path d="M45.8,27.8 L22.6,27.8 C21.7,33.6 21.2,39.4 21.1,45.3 L45.8,45.3 L45.8,27.8 Z"></path><path d="M75,86.7 C74.9,87 74.8,87.2 74.7,87.4 C80.1,83.7 84.7,79 88.2,73.5 L78.8,73.5 C77.9,78 76.6,82.4 75,86.7"></path><path d="M75.8,45.3 C75.7,39.4 75.2,33.6 74.3,27.8 L51.2,27.8 L51.2,45.3 L75.8,45.3 Z"></path><path d="M18.2,73.5 L7.8,73.5 C11.6,79.4 16.6,84.5 22.6,88.2 C22.4,87.7 22.1,87.2 22,86.7 C20.4,82.4 19.1,78 18.2,73.5"></path><path d="M21.1,50.7 C21.2,56.6 21.7,62.4 22.6,68.2 L45.7,68.2 L45.7,50.7 L21.1,50.7 Z"></path></svg><span class="countryGroups__label">
        United Kingdom (£)</span><span class="icon icon--arrows"><svg class="svg-chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 10" preserveAspectRatio="xMinYMid"><path d="M1.25.5l-.75.75L9 9.5h.95l8.55-8.25-.75-.75L9.5 7.25z"></path></svg></span></div></summary><ul class="countryGroups__list"><li class="countryGroups__item"><a href="/uk/contribute">
        United Kingdom (£)<span class="icon"><svg class="svg-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 14" preserveAspectRatio="xMinYMid"><path d="M1.36 6.9l-.86.888L4.798 14h.409L17.5.865 16.64 0 5.207 10.694z"></path></svg></span></a></li><li class="countryGroups__item"><a href="/us/contribute">
        United States (US$)</a></li><li class="countryGroups__item"><a href="/au/contribute">
        Australia (AU$)</a></li><li class="countryGroups__item"><a href="/eu/contribute">
        Europe (€)</a></li><li class="countryGroups__item"><a href="/int/contribute">
        International (US$)</a></li><li class="countryGroups__item"><a href="/nz/contribute">
        New Zealand (NZ$)</a></li><li class="countryGroups__item"><a href="/ca/contribute">
        Canada (CA$)</a></li></ul></details></header><main role="main" class="gu-content__main">
      <div class="gu-content__content gu-content__content-contributions gu-content__content--flex">
        <div class="gu-content__blurb">
          <h1 class="gu-content__blurb-header">Help us deliver the independent journalism the world needs</h1>
          <p class="gu-content__blurb-blurb">
            Make a recurring commitment to support The&nbsp;Guardian long-term or a single contribution
            as and when you feel like it – choose the option that suits you best.
          </p>
        </div>
        <div class="gu-content__form">
          <form class="form form--contribution" novalidate=""><fieldset class="form__radio-group form__radio-group--tabs form__radio-group--contribution-type"><legend class="form__legend form__legend--radio-group">
            Recurrence</legend>
            <ul class="form__radio-group-list form__radio-group-list--border">
              <li class="form__radio-group-item">
                <span class="frequencies__placeholder">
                  <input id="contributionType-ONE_OFF" class="form__radio-group-input" type="radio" name="contributionType" value="ONE_OFF">
                  <label for="contributionType-ONE_OFF" class="form__radio-group-label">F</label>
                </span></li>
              <li class="form__radio-group-item">
                <span class="frequencies__placeholder">
                  <input id="contributionType-MONTHLY" class="form__radio-group-input" type="radio" name="contributionType" value="MONTHLY">
                  <label for="contributionType-MONTHLY" class="form__radio-group-label">F</label>
                </span></li>
              <li class="form__radio-group-item">
                <span class="frequencies__placeholder">
                  <input id="contributionType-ANNUAL" class="form__radio-group-input" type="radio" name="contributionType" value="ANNUAL">
                  <label for="contributionType-ANNUAL" class="form__radio-group-label">F</label>
                </span></li>
            </ul></fieldset><fieldset class="form__radio-group form__radio-group--pills form__radio-group--contribution-amount"><legend class="form__legend form__legend--radio-group">
            Amount</legend>
            <ul class="form__radio-group-list ">
              <li class="form__radio-group-item">
                <span class="amounts__placeholder">
                  <input id="contributionAmount-50" class="form__radio-group-input" type="radio" name="contributionAmount" value="50">
                  <label for="contributionAmount-50" class="form__radio-group-label"></label>
                </span>
              </li>
              <li class="form__radio-group-item">
                <span class="amounts__placeholder">
                  <input id="contributionAmount-100" class="form__radio-group-input" type="radio" name="contributionAmount" value="100" checked>
                  <label for="contributionAmount-100" class="form__radio-group-label"></label>
                </span>
              </li>
              <li class="form__radio-group-item">
                <span class="amounts__placeholder">
                  <input id="contributionAmount-250" class="form__radio-group-input" type="radio" name="contributionAmount" value="250">
                  <label for="contributionAmount-250" class="form__radio-group-label"></label>
                </span>
              </li>
              <li class="form__radio-group-item">
                <span class="amounts__placeholder">
                  <input id="contributionAmount-500" class="form__radio-group-input" type="radio" name="contributionAmount" value="500">
                  <label for="contributionAmount-500" class="form__radio-group-label"></label>
                </span>
              </li>
              <li class="form__radio-group-item">
                <span class="amounts__placeholder">
                  <input id="contributionAmount-other" class="form__radio-group-input" type="radio" name="contributionAmount" value="other">
                  <label for="contributionAmount-other" class="form__radio-group-label">
                  </label></span>
              </li>
            </ul>
          </fieldset>
          <div class="stripe-payment-request-button stripe-payment-request-button--hidden"></div>
          <div class="form form--content">
            <div class="form-fields">
              <div class="form__field form__field--contribution-email">
                <label class="form__label" for="contributionEmail">Email address</label><span class="form__input-with-icon"><input id="contributionEmail" class="form__input form__input--contributionEmail" type="email" autocapitalize="none" autocomplete="email" required="" placeholder="example@@domain.com" pattern="^[a-zA-Z0-9\.!#$%&amp;'*+/=?^_`{|}~-]+@@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$" style="background-image: url(&quot;data: image/png;
            base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAfBJREFUWAntVk1OwkAUZkoDKza4Utm61iP0AqyIDXahN2BjwiHYGU+gizap4QDuegWN7lyCbMSlCQjU7yO0TOlAi6GwgJc0fT / fzPfmzet0crmD7HsFBAvQbrcrw+Gw5fu+AfOYvgylJ4TwCoVCs1ardYTruqfj8fgV5OUMSVVT93VdP9dAzpVvm5wJHZFbg2LQ2pEYOlZ /oiDvwNcsFoseY4PBwMCrhaeCJyKWZU37KOJcYdi27QdhcuuBIb073BvTNL8ln4NeeR6NRi/ wxZKQcGurQs5oNhqLshzVTMBewW / LMU3TTNlO0ieTiStjYhUIyi6DAp0xbEdgTt+LE0aCKQw24U4llsCs4ZRJrYopB6RwqnpA1YQ5NGFZ1YQ41Z5S8IQQdP5laEBRJcD4Vj5DEsW2gE6s6g3d /YP/ g+BDnT7GNi2qCjTwGd6riBzHaaCEd3Js01vwCPIbmWBRx1nwAN / 1 ov+ / drgFWIlfKpVukyYihtgkXNp4mABK+1 GtVr+SBhJDbBIubVw+Cd /TDgKO2DPiN3YUo6y/ nDCNEIsqTKH1en2tcwA9FKEItyDi3aIh8Gl1sRrVnSDzNFDJT1bAy5xpOYGn5fP5JuL95ZjMIn1ya7j5dPGfv0A5eAnpZUY3n5jXcoec5J67D9q+VuAPM47D3XaSeL4AAAAASUVORK5CYII =&quot;);
            background-repeat: no-repeat;
            background-attachment: scroll;
            background-size: 16px 18px;
            background-position: 98% 50%;
            cursor: auto;"><span class="form__icon"><svg class="svg-envelope" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 10" preserveAspectRatio="xMinYMid"><path d="M.902 0L8 6.213 15.098 0H.902zM0 .787v8.42l4.787-4.232L0 .787zm16 0l-4.787 4.188L16 9.206V.787zM5.689 5.763L.896 10h14.208L10.31 5.763 8.378 7.456a.575.575 0 0 1-.756 0L5.689 5.763z"></path></svg></span></span>
              </div>
              <div>
                <div class="form__field form__field--contribution-fname">
                  <label class="form__label" for="contributionFirstName">First name</label><span class="form__input-with-icon"><input id="contributionFirstName" class="form__input form__input--contributionFirstName" type="text" autocapitalize="words" autocomplete="given-name" required=""><span class="form__icon"><svg class="svg-user" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" preserveAspectRatio="xMinYMid"><path d="M10 8.3c1.55 0 3.4-1.75 3.4-3.9S12.15 1 10 1 6.6 2.25 6.6 4.4s2 3.9 3.4 3.9zm5.86 3.4l-.86-.82c-1.67-.58-3.14-.88-5-.88-1.87 0-3.32.3-5 .86l-.86.85L2 18.16l.86.84h14.28l.86-.86-2.14-6.42v-.02z"></path></svg></span></span>
                </div>
                <div class="form__field form__field--contribution-lname">
                  <label class="form__label" for="contributionLastName">Last name</label><span class="form__input-with-icon"><input id="contributionLastName" class="form__input form__input--contributionLastName" type="text" autocapitalize="words" autocomplete="family-name" required=""><span class="form__icon"><svg class="svg-user" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" preserveAspectRatio="xMinYMid"><path d="M10 8.3c1.55 0 3.4-1.75 3.4-3.9S12.15 1 10 1 6.6 2.25 6.6 4.4s2 3.9 3.4 3.9zm5.86 3.4l-.86-.82c-1.67-.58-3.14-.88-5-.88-1.87 0-3.32.3-5 .86l-.86.85L2 18.16l.86.84h14.28l.86-.86-2.14-6.42v-.02z"></path></svg></span></span>
                </div>
              </div>
            </div>
          </div>
          <fieldset class="form__radio-group form__radio-group--buttons form__radio-group--contribution-pay"><legend class="form__legend">
            Payment method</legend><ul class="form__radio-group-list"><li class="form__radio-group-item"><input id="paymentMethodSelector-DirectDebit" class="form__radio-group-input" name="paymentMethodSelector" type="radio" value="DirectDebit"><label for="paymentMethodSelector-DirectDebit" class="form__radio-group-label"><span class="radio-ui"></span><span class="radio-ui__label">
            Direct debit</span><svg class="svg-direct-debit-symbol" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 26" preserveAspectRatio="xMinYMid"><path d="M18.254 9.655v13.73s-7.444-1.436-7.444-6.893c0-4.353 5.51-6.272 7.444-6.837zm-14.618 6.55c0 3.2 5.371 7.878 14.119 8 .345 0 10.282-.41 10.129-11.817-.129-9.582-6.834-11.26-8.978-11.552V.252c8.548.58 15.27 6.078 15.27 12.75 0 7.06-7.52 12.804-16.766 12.804C8.163 25.806.68 20.06.68 13.003.681 5.945 8.163.2 17.41.2c.283 0 .565.005.844.016V9.4c-4.474-.346-14.618 1.897-14.618 6.805z"fill="#00B2FF"></path></svg></label></li><li class="form__radio-group-item"><input id="paymentMethodSelector-Stripe" class="form__radio-group-input" name="paymentMethodSelector" type="radio" value="Stripe"><label for="paymentMethodSelector-Stripe" class="form__radio-group-label"><span class="radio-ui"></span><span class="radio-ui__label">
            Credit/Debit card</span><svg class="svg-new-credit-card" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14" preserveAspectRatio="xMinYMid"><path d="M22 3.652H0V1.326C0 .594.58 0 1.295 0h19.41C21.42 0 22 .594 22 1.326v2.326zm0 1.826v7.196c0 .733-.58 1.326-1.295 1.326H1.295C.58 14 0 13.407 0 12.674V5.478h22zM2.494 9.74a.609.609 0 0 0 0 1.218h3.183a.609.609 0 1 0 0-1.218H2.494z" fill="#00B2FF"></path></svg></label></li><li class="form__radio-group-item"><input id="paymentMethodSelector-PayPal" class="form__radio-group-input" name="paymentMethodSelector" type="radio" value="PayPal"><label for="paymentMethodSelector-PayPal" class="form__radio-group-label"><span class="radio-ui"></span><span class="radio-ui__label">
            PayPal</span><svg class="svg-paypal" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 18" preserveAspectRatio="xMinYMid"><path d="M2.334.637L.01 15.407c-.074.458.27.687 1.032.687h2.875l.804-5.483c.114-.366.313-.549.597-.549h2.674C11 9.735 12.835 8.029 13.5 4.942 14.495.313 10.031 0 8.783 0H3.036C2.8.048 2.631.124 2.53.23a.773.773 0 0 0-.196.407z" fill="#27346A"></path><path d="M5.633 4.554l-1.925 12.85c-.061.397.224.596.855.596h2.382c.34-.073.537-.205.59-.395.053-.19.298-1.628.734-4.312.087-.21.27-.314.55-.314s.891-.04 1.836-.12c2.268-.355 3.676-1.875 4.226-4.56C15.706 4.274 12.01 4 10.975 4h-4.76c-.196.041-.335.108-.419.2a.687.687 0 0 0-.163.354z" fill="#2790C3"></path><path d="M13.564 4.604a7.13 7.13 0 0 1-.065.338c-.664 3.087-2.5 4.793-5.507 5.12H5.318c-.276 0-.472.173-.588.52l.903-6.028a.687.687 0 0 1 .163-.354c.084-.092.223-.159.419-.2h4.76c.506 0 1.65.065 2.589.604zm-9.067 7.53l-.58 3.96h-.013l.593-3.96z" fill="#1F264F"></path></svg></label></li></ul>
          </fieldset>
          <div class="form__submit">
            <div class="form__submit--contribution">
              <button class="button button--right-arrow form__submit-button" type="submit" aria-describedby="accessibility-hint-submit-contribution">&nbsp;</button>
            </div>
          </div>

            <div class="component-terms-privacy">
              <div class="component-terms-privacy__change">
                Monthly contributions are billed each month and annual contributions are billed once a year. You can change how much you give or cancel your contributions at any time.</div><div class="component-terms-privacy__terms">
              By proceeding, you are agreeing to our <a href="https://www.theguardian.com/info/2016/apr/04/contribution-terms-and-conditions">
              Terms and Conditions</a>
              . To find out what personal data we collect and how we use it, please visit our <a href="https://www.theguardian.com/help/privacy-policy">
              Privacy Policy</a>
              .
            </div>
            </div>
            <div class="component-progress-message fade-in-message">
              <div class="component-progress-message__dialog">

                <div class="component-progress-message__message">Loading the page</div>
                <div class="component-animated-dots component-animated-dots--light">
                  <div class="component-animated-dots__bounce1"></div>
                  <div class="component-animated-dots__bounce2"></div>
                  <div class="component-animated-dots__bounce3"></div>
                </div>
              </div>
              <div class="component-progress-message__background"></div>
            </div>
          </form>
        </div>
      </div>
    </main>
    <footer class="component-footer" role="contentinfo">
      <div class="component-content component-content--dark">
        <section class="component-left-margin-section">
          <div class="component-left-margin-section__content">
            <div class="component-content__content">
              <div class="component-footer__content">
                <div class="component-base-rows component-base-rows--normal">
                  <p class="component-contrib-legal">The ultimate owner of the Guardian is The Scott Trust Limited, whose role it is to secure the editorial and financial independence of the Guardian in perpetuity. Reader contributions support the Guardian’s journalism. Please note that your support of the Guardian’s journalism does not constitute a charitable donation, as such your contribution is not eligible for Gift Aid in the UK nor a tax-deduction elsewhere. If you have any questions about contributing to the Guardian, please <a href="mailto:contribution.support@@theguardian.com">contact us here</a>.</p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div class="component-content component-content--dark component-content--force-border">
        <section class="component-left-margin-section">
          <div class="component-left-margin-section__content">
            <div class="component-content__content">
              <span class="component-footer__copyright">© 2019 Guardian News and Media Limited or its affiliated companies. All rights reserved.</span>
            </div>
          </div>
        </section>
      </div>
    </footer>
    </div>
  </div>

} { ssr =>

@main(title = title, mainJsBundle = js, fontLoaderBundle = fontLoaderBundle, description = description, mainElement = SSRContent(id, ssr), mainStyleBundle = css) {
  <script type="text/javascript">
    window.guardian = window.guardian || {};
    @idUser.map { user =>
      window.guardian.user = {
        id: "@user.id",
        email: "@user.primaryEmailAddress",
        @user.publicFields.displayName.map { displayName =>
          displayName: "@displayName",
        }
    @for(fields <- user.privateFields; firstName <- fields.firstName; lastName <- fields.secondName) {
          firstName: "@firstName",
          lastName: "@lastName",
        }
      };
    };
    window.guardian.stripeKeyDefaultCurrencies = {
      ONE_OFF: {
        default: "@oneOffDefaultStripeConfig.forCurrency(None).publicKey",
        uat: "@oneOffUatStripeConfig.forCurrency(None).publicKey"
      },
      REGULAR: {
        default: "@regularDefaultStripeConfig.forCurrency(None).publicKey",
        uat: "@regularUatStripeConfig.forCurrency(None).publicKey"
      }
    };
    window.guardian.stripeKeyAustralia = {
      ONE_OFF: {
        default: "@oneOffDefaultStripeConfig.forCurrency(Some(AUD)).publicKey",
        uat: "@oneOffUatStripeConfig.forCurrency(Some(AUD)).publicKey"
      },
      REGULAR: {
        default: "@regularDefaultStripeConfig.forCurrency(Some(AUD)).publicKey",
        uat: "@regularUatStripeConfig.forCurrency(Some(AUD)).publicKey"
      }
    };
    window.guardian.payPalEnvironment = {
      default: "@regularDefaultPayPalConfig.payPalEnvironment",
      uat: "@regularUatPayPalConfig.payPalEnvironment"
    };
    window.guardian.paymentApiStripeEndpoint = "@paymentApiStripeEndpoint";
    window.guardian.paymentApiPayPalEndpoint = "@paymentApiPayPalEndpoint";
    window.guardian.existingPaymentOptionsEndpoint = "@existingPaymentOptionsEndpoint";
    window.guardian.csrf = { token: "@CSRF.getToken.value" };
  </script>
}

}
